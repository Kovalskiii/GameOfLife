"use strict";(self.webpackChunkgame_of_life_prj=self.webpackChunkgame_of_life_prj||[]).push([[745],{1745:(S,m,l)=>{l.r(m),l.d(m,{HomeModule:()=>v});var g=l(8583),e=l(7716),p=l(1095);const f=["canvasEl"];let b=(()=>{class o{constructor(){this.gameStarted=!1,this.gameStopped=!1,this.gridIsFilled=!1}getInitialGrid(){return this.canvasEl.nativeElement.width=this.canvasEl.nativeElement.offsetWidth,this.canvasEl.nativeElement.height=this.canvasEl.nativeElement.offsetHeight,console.log(this.canvasEl.nativeElement.width),console.log(this.canvasEl.nativeElement.height),this.resolution=12,this.colsNum=Math.round(this.canvasEl.nativeElement.width/this.resolution),this.rowsNum=Math.round(this.canvasEl.nativeElement.height/this.resolution),new Array(this.colsNum).fill(0).map(()=>new Array(this.rowsNum).fill(0))}randomizeInitialGrid(i){return i.map(t=>t.map(()=>Math.floor(2*Math.random())))}fillInitialGrid(i){if(!this.gameStarted){const t=this.canvasEl.nativeElement.getBoundingClientRect(),n=i.clientX-t.left,r=i.clientY-t.top,a=Math.floor(n/this.resolution),s=Math.floor(r/this.resolution);console.log("x: "+n+" y: "+r),console.log("xCol: "+a+" yRow: "+s),this.currentGridState[a][s]=0==this.currentGridState[a][s]?1:0,this.paintGridCells(this.currentGridState),this.gridIsFilled=!0}}getNextGenCells(){const i=this.currentGridState.map(t=>t.slice());for(let t=0;t<this.currentGridState.length;t++)for(let n=0;n<this.currentGridState[t].length;n++){const r=this.currentGridState[t][n];let a=0;for(let s=-1;s<2;s++)for(let c=-1;c<2;c++){if(0===s&&0===c)continue;const h=t+s,u=n+c;h>=0&&u>=0&&h<this.colsNum&&u<this.rowsNum&&(a+=this.currentGridState[t+s][n+c])}1===r&&a<2||1===r&&a>3?i[t][n]=0:0===r&&3===a&&(i[t][n]=1)}return i}paintGridCells(i){this.context=this.canvasEl.nativeElement.getContext("2d");for(let t=0;t<i.length;t++)for(let n=0;n<i[t].length;n++){const r=i[t][n];this.context.beginPath(),this.context.rect(t*this.resolution,n*this.resolution,this.resolution,this.resolution),this.context.fillStyle=r?"gray":"white",this.context.fill(),this.context.strokeStyle="lightgray",this.context.stroke()}}updateGrid(){this.gameStopped||(this.currentGridState=this.getNextGenCells(),this.paintGridCells(this.currentGridState),this.animReqId=requestAnimationFrame(this.updateGrid.bind(this)))}startGame(){this.animReqId=requestAnimationFrame(this.updateGrid.bind(this)),this.gameStarted=!0,this.gameStopped=!1}stopGame(){this.animReqId&&(cancelAnimationFrame(this.animReqId),this.gameStarted=!1,this.gameStopped=!0)}clearGrid(){this.stopGame(),this.currentGridState=this.getInitialGrid(),this.paintGridCells(this.currentGridState),this.gameStopped=!1,this.gridIsFilled=!1}randomizeGrid(){const i=this.getInitialGrid();this.currentGridState=this.randomizeInitialGrid(i),this.paintGridCells(this.currentGridState),this.gridIsFilled=!0}ngAfterViewInit(){const i=this.getInitialGrid();this.paintGridCells(i),this.currentGridState=i}sizeChange(i){window.location.reload()}}return o.\u0275fac=function(i){return new(i||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-home"]],viewQuery:function(i,t){if(1&i&&e.Gf(f,5),2&i){let n;e.iGM(n=e.CRH())&&(t.canvasEl=n.first)}},hostBindings:function(i,t){1&i&&e.NdJ("resize",function(r){return t.sizeChange(r)},!1,e.Jf7)},decls:13,vars:4,consts:[[1,"content"],["id","canvas",3,"click"],["canvasEl",""],[1,"game-buttons"],["mat-raised-button","","id","start-btn","color","primary",3,"disabled","click"],["startBtn",""],["mat-raised-button","","id","stop-btn","color","warn",3,"disabled","click"],["mat-raised-button","","id","clear-btn","color","basic",3,"disabled","click"],["mat-raised-button","","id","randomize-btn","color","basic",3,"disabled","click"]],template:function(i,t){1&i&&(e.TgZ(0,"div",0),e.TgZ(1,"canvas",1,2),e.NdJ("click",function(r){return t.fillInitialGrid(r)}),e.qZA(),e.TgZ(3,"div",3),e.TgZ(4,"button",4,5),e.NdJ("click",function(){return t.startGame()}),e._uU(6," Start "),e.qZA(),e.TgZ(7,"button",6),e.NdJ("click",function(){return t.stopGame()}),e._uU(8," Stop "),e.qZA(),e.TgZ(9,"button",7),e.NdJ("click",function(){return t.clearGrid()}),e._uU(10," Clear "),e.qZA(),e.TgZ(11,"button",8),e.NdJ("click",function(){return t.randomizeGrid()}),e._uU(12," Randomize "),e.qZA(),e.qZA(),e.qZA()),2&i&&(e.xp6(4),e.Q6J("disabled",t.gameStarted||!t.gameStopped&&!t.gridIsFilled),e.xp6(3),e.Q6J("disabled",!t.gameStarted),e.xp6(2),e.Q6J("disabled",t.gameStarted||!t.gameStopped&&!t.gridIsFilled),e.xp6(2),e.Q6J("disabled",t.gameStarted||t.gameStopped))},directives:[p.lW],styles:[".content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;align-self:center;justify-content:center;padding:25px 30px 35px}canvas[_ngcontent-%COMP%]{border:2px solid rgba(0,0,0,.35);transition:.3s;border-radius:4px;background-color:#d3d3d3;min-width:70%;min-height:70%}.game-buttons[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;align-self:center;justify-content:center;padding:25px 5px}#start-btn[_ngcontent-%COMP%], #stop-btn[_ngcontent-%COMP%], #clear-btn[_ngcontent-%COMP%], #randomize-btn[_ngcontent-%COMP%]{margin:0 10px;padding:2px 6px;background-color:#0077b5}@media (max-width: 800px){canvas[_ngcontent-%COMP%]{width:80vw;height:72vh}#start-btn[_ngcontent-%COMP%], #stop-btn[_ngcontent-%COMP%], #clear-btn[_ngcontent-%COMP%], #randomize-btn[_ngcontent-%COMP%]{margin:0 5px;padding:2px 6px;background-color:#0077b5;font-size:small}}@media (min-width: 800px){canvas[_ngcontent-%COMP%]{width:80vw;height:72vh}}"]}),o})();var G=l(15),C=l(3466);let v=(()=>{class o{}return o.\u0275fac=function(i){return new(i||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[g.ez,G.Bz.forChild([{path:"",component:b}]),C.q]]}),o})()}}]);